# AI-EVA Demo 打包说明

## 打包步骤

### 方法一：使用打包脚本（推荐）

1. 运行 `build-package.bat`
2. 脚本会自动：
   - 创建打包目录
   - 复制所有必要文件
   - 创建一键启动脚本
   - 创建使用说明
   - 生成压缩包（如果系统有压缩工具）

### 方法二：手动打包

1. 创建目录 `AI-EVA-Demo`
2. 复制以下文件：
   - `index.html`
   - `config.py`
   - `chattts_api.py`
   - `sensevoice_api.py`
   - `requirements.txt`
   - `requirements-gpu.txt`
   - `README.md`
   - `start-all.bat`（或使用 `启动.bat`）
   - `utils/` 目录（完整复制）
   - `SenseVoice/` 目录（完整复制）

3. 创建 `启动.bat` 文件（内容参考 `start-all.bat`）

4. 创建 `使用说明.txt` 文件

5. 压缩整个目录

## 打包后的目录结构

```
AI-EVA-Demo/
├── index.html              # 前端页面
├── chattts_api.py          # ChatTTS API服务
├── sensevoice_api.py       # SenseVoice API服务
├── config.py               # 配置文件
├── requirements.txt        # Python依赖
├── requirements-gpu.txt    # GPU版本依赖
├── 启动.bat                # 一键启动脚本
├── 使用说明.txt            # 使用说明
├── README.md               # 项目说明
├── utils/                  # 工具模块
│   ├── audio_cache.py
│   └── logger.py
├── SenseVoice/             # SenseVoice模块
│   ├── api.py
│   └── ...
├── models/                 # 模型目录（空，用户可放入VRM模型）
└── logs/                   # 日志目录（自动创建）
```

## 使用打包后的程序

1. **解压**：将压缩包解压到任意目录
2. **运行**：双击 `启动.bat`
3. **等待**：等待所有服务启动（约10-15秒）
4. **访问**：浏览器会自动打开，或手动访问 http://localhost:8000

## 注意事项

### 环境要求
- Python 3.8+ 必须已安装并添加到 PATH
- Ollama 需要单独安装（https://ollama.ai/download）
- 首次运行会自动安装 Python 依赖

### 端口占用
确保以下端口未被占用：
- 8000（前端）
- 9966（ChatTTS）
- 50000（SenseVoice）
- 11434（Ollama）

### 模型文件
- VRM 模型文件需要用户自行准备
- 可以将常用的 VRM 模型放入 `models/` 目录

## 制作独立可执行文件（可选）

如果需要制作真正的 exe 文件，可以使用 PyInstaller：

```bash
# 安装 PyInstaller
pip install pyinstaller

# 打包主服务（需要分别为每个服务创建）
pyinstaller --onefile --name ChatTTS chattts_api.py
pyinstaller --onefile --name SenseVoice SenseVoice/api.py

# 创建启动器
pyinstaller --onefile --name AI-EVA-Launcher launcher.py
```

但考虑到项目的复杂性（多个服务、前端文件等），使用 bat 脚本打包更简单实用。

## 分发建议

1. **压缩包格式**：推荐使用 ZIP 格式，兼容性好
2. **文件大小**：如果包含模型文件，可能较大，建议使用云盘分享
3. **版本信息**：在文件名中包含版本号，如 `AI-EVA-Demo-v1.0.zip`
4. **使用说明**：确保包含清晰的使用说明文档

